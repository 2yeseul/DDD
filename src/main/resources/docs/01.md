# 도메인이란

## 정의
> 소프트웨어로 해결하고자 하는 문제 영역

- 한 도메인은 다시 하위 도메인으로 나눌 수 있음
  - 주문 -> 혜택, 회원, 결제, 정산, 배송 등등..
- 도메인마다 고정된 하위 도메인이 존재하는 것이 아님
  - 어떻게 구성할 지 여부는 상황에 따라 달라진다

## 도메인 전문가와 개발자 간 지식 공유
요구사항을 잘 분석한 뒤 설계하여야 올바른 기능을 만들 수 있다. 
요구사항을 제대로 이해하기 위해서는 개발자와 전문가가 직접 대화하는 것이다.
개발자 역시 도메인 지식을 갖춰야한다.

## 도메인 모델 
> 특정 도메인을 개념적으로 표현

주문을 하기 위해서는,
1) 상품을 몇 개 살지 선택
2) 배송비 입력
3) 상품 가격을 이용하여 지불 금액 계산
4) 결제 수단 선택
5) 주문
   1) 주문 뒤 배송 전 -> 주소 변경 or 주문 취소 가능

![img](https://user-images.githubusercontent.com/43533905/178106008-c88b44f2-2138-4df2-aa1e-e9dbe8c06ad2.png)

## 도메인 모델 패턴

### 아키텍처 구성
|영역|설명|
|---|---|
|표현(Presentation)|사용자의 요청을 처리하고, 사용자에게 정보를 보여준다.|
|응용(Application)|사용자가 요청한 기능을 실행한다. 업무 로직을 직접 구현하지 않으며, 도메인 계층을 조합해서 기능을 실행한다.|
|도메인|시스템이 제공할 도메인 규칙을 구현한다.|
|인프라스트럭처|DB나 메시징 시스템과 같은 외부 시스템과의 연동을 처리한다.|

> 도메인 모델 패턴은 아키텍처 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴

- 도메인 계층은 도메인의 핵심 규칙을 구현한다.
  - 주문 도메인의 경우, 배송 규칙에 대한 코드가 도메인 계층에 위치한다.

## 도메인 모델 도출
> 도메인을 모델링할 때 기본이 되는 작업은 모델을 구성하는 핵심 구성요소, 규칙, 기능을 찾는 것이다. 

## 엔티티와 밸류 
> 도출한 도메인 모델은 크게 엔티티와 밸류로 구분할 수 있다. 엔티티와 밸류를 제대로 구분해야 도메인을 올바르게 설계하고 구현할 수 있기 때문에, 이 둘의 차이를 명확하게 이해해야 한다.

### 엔티티
> 엔티티의 가장 큰 특징은 엔티티 객체 마다 고유한 식별자를 가진다는 것이다.

#### 엔티티의 식별자 생성
- 특정 규칙에 따라 생성
- UUID, Nano ID 같은 고유 식별자 생성기 사용
- 직접 값 지정
- 일련번호 사용 (Sequence or auto increment)

### 밸류 타입
> 밸류 타입은 개념적으로 완전한 하나를 표현할 때 사용한다.
- 밸류 타입이 꼭 두 개 이상의 데이터를 가져야 하는 것은 아니다. 의미를 명확하게 표현하기 위해 밸류타입을 사용하는 경우도 있다.


### 엔티티 식별자와 밸류 타입
Money가 단순 숫자가 아닌, 도메인의 '돈'을 의미하는 것 처럼 식별자는 단순한 문자열이 아니라 도메인에서 특별한 의미를 지니는 경우가 많다.
따라서 식별자를 위한 밸류 타입을 사용해서 의미를 잘 드러나게할 수 있다.